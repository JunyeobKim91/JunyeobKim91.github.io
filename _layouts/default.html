---
layout: compress
---

<!doctype html>
<html lang="en" class="no-js">
  <head>
    {% include head.html %}
    {% include head/custom.html %}
  </head>
<script type="module" src="https://cdn.skypack.dev/@hotwired/turbo"></script>

  <body>

    {% include browser-upgrade.html %}
    {% include masthead.html %}
<turbo-frame id="content">
    <div id="main" role="main">
      {% include sidebar.html %}
    
      <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
        {% if page.title %}<meta itemprop="headline" content="{{ page.title | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
        <div class="page__inner-wrap">
          <section class="page__content" itemprop="text">
            {{ content }}
          </section>
        </div>
      </article>
    </div>
</turbo-frame>

{% include scripts.html %}

<!-- 전환 후 greedy-nav 재계산 강제 -->
<script>
(function () {
  function fixGreedyNav() {
    // 테마의 메뉴 너비 재계산을 유도
    window.dispatchEvent(new Event('resize'));
    // (혹시 전역으로 제공되면 직접 호출)
    if (window.greedyNavigation && typeof window.greedyNavigation.fit === 'function') {
      try { window.greedyNavigation.fit(); } catch(e) {}
    }
  }

  // 1) 최초 로드
  document.addEventListener('DOMContentLoaded', fixGreedyNav);

  // 2) 해시 기반 섹션 전환을 쓰는 경우
  window.addEventListener('hashchange', fixGreedyNav);

  // 3) Turbo(또는 turbo-frame)로 부분 내비게이션하는 경우
  document.addEventListener('turbo:load', fixGreedyNav);
  document.addEventListener('turbo:frame-load', fixGreedyNav);
})();
</script>
</html>
